// SPDX-License-Identifier: GPL-3.0
// Generated using circom - https://github.com/iden3/circom
pragma solidity ^0.8.0;

import "./Pairing.sol";

contract OpenAnswerVerifier {
    using Pairing for *;
    struct VerifyingKey {
        Pairing.G1Point alfa1;
        Pairing.G2Point beta2;
        Pairing.G2Point gamma2;
        Pairing.G2Point delta2;
        Pairing.G1Point[] IC;
    }
    struct Proof {
        Pairing.G1Point A;
        Pairing.G2Point B;
        Pairing.G1Point C;
    }
    function verifyingKey() internal pure returns (VerifyingKey memory vk) {
        vk.alfa1 = Pairing.G1Point(
            20491192805390485299153009773594534940189261866228447918068658471970481763042,
            9383485363053290200918347156157836566562967994039712273449902621266178545958
        );

        vk.beta2 = Pairing.G2Point(
            [4252822878758300859123897981450591353533073413197771768651442665752259397132,
             6375614351688725206403948262868962793625744043794305715222011528459656738731],
            [21847035105528745403288232691147584728191162732299865338377159692350059136679,
             10505242626370262277552901082094356697409835680220590971873171140371331206856]
        );
        vk.gamma2 = Pairing.G2Point(
            [11559732032986387107991004021392285783925812861821192530917403151452391805634,
             10857046999023057135944570762232829481370756359578518086990519993285655852781],
            [4082367875863433681332203403145435568316851327593401208105741076214120093531,
             8495653923123431417604973247489272438418190587263600148770280649306958101930]
        );
        vk.delta2 = Pairing.G2Point(
            [774638907010067990390960904397881297142972943152639538965929835878971518434,
             5251315078477479988379242541425372741914624074936475130886685764551018749050],
            [8217917424542206191112420182620980265976162040156469855282675600872306551199,
             9706170732952727444968551483670432159899273728071211243710489319323713992293]
        );
        vk.IC = new Pairing.G1Point[](52);
        
        vk.IC[0] = Pairing.G1Point( 
            6466457694947944031879954885998089257712003386699602772193211267658227763873,
            12273719430867304677039083841764005210244296888778349593755365120795451235316
        );                                      
        
        vk.IC[1] = Pairing.G1Point( 
            7325654004951867574106477570252683897185836813173397255412575232015420179829,
            7424912246250810410212595241662555350470130834431553309649932488155250584420
        );                                      
        
        vk.IC[2] = Pairing.G1Point( 
            3138311658506655469409789987000816459374801772193017625513560169993183553654,
            2100746810020119088214503427589782242318695035464346047311429542214113235561
        );                                      
        
        vk.IC[3] = Pairing.G1Point( 
            20662450278460432533541683150146771216211838207667213258883890973032648340319,
            21670702146737369792764452717033611383496964817358506677861712201173812066307
        );                                      
        
        vk.IC[4] = Pairing.G1Point( 
            21455089422509189656889488083295134562359825959616579735058237040500465214159,
            6630557580180274391360797730366239787831534703199825128779112359845905105547
        );                                      
        
        vk.IC[5] = Pairing.G1Point( 
            12200943560213624702947425403456252741634734186475059415271485588111459455144,
            15637308361104040458334965016437582955033661785338017144865878781418325771999
        );                                      
        
        vk.IC[6] = Pairing.G1Point( 
            20335583867369325219521632996391784866712245365626728241710378781588682307744,
            6211205258965963501817154760419959247136617613651724638129045588261911855236
        );                                      
        
        vk.IC[7] = Pairing.G1Point( 
            15534589781348350878599932565387258074702254188164034263186419612926994760512,
            13089389106714289717072876785591826141192691974258422614417230749719324726016
        );                                      
        
        vk.IC[8] = Pairing.G1Point( 
            2998970374305477609168077611662977860162947315527373573455898145684209724281,
            10170647274960677780773921485327821275852978449938330831046252465182308718180
        );                                      
        
        vk.IC[9] = Pairing.G1Point( 
            4234807574400698078676367022072770718308178765639010028173965825149247953091,
            3581266204986259564214646002551082641024147805794362631667068496087717794282
        );                                      
        
        vk.IC[10] = Pairing.G1Point( 
            12326931598339298475123417584467598962050682223828272176452051067278336426315,
            17637869151754805256045347274142462314458910306726969570820832440937543517978
        );                                      
        
        vk.IC[11] = Pairing.G1Point( 
            10324789869421206739732199666891915686725841773469254795178134988189663906491,
            16627385410751649191629106372296057569542954639529903862469388053291475097366
        );                                      
        
        vk.IC[12] = Pairing.G1Point( 
            12618426350093711142505148899267122298398759602650207702750049764081937814742,
            13130011004509076747354507769114066294551475870998580269323136993509003930767
        );                                      
        
        vk.IC[13] = Pairing.G1Point( 
            13003887617991680464329077217557649836982874142583568943756663358718768633405,
            148021559333872679724794304412078423952644213492651923189334855078546195832
        );                                      
        
        vk.IC[14] = Pairing.G1Point( 
            20926971623943952344320142141228450135906528368597427906998315185748339769032,
            21584491101360602691309384101988988133935186757795027972649629838014694439667
        );                                      
        
        vk.IC[15] = Pairing.G1Point( 
            6432931996438709971383942218203786498569695904370460229534856416869185432172,
            1561452240236848455522458428040407770415566516271434462873474011807396000974
        );                                      
        
        vk.IC[16] = Pairing.G1Point( 
            20872121131260857532739143682228705354376894571048691553180817764275535842271,
            16334604969996319503607126239351031588107510928617629165677462909316179546315
        );                                      
        
        vk.IC[17] = Pairing.G1Point( 
            13346454518112194468840511257511982930057003521586858899100659657479449724375,
            5463192350650674727591944935158537478875384762692806967714443228051753159032
        );                                      
        
        vk.IC[18] = Pairing.G1Point( 
            21690885287968167222317098535166230584702223096881799607380833244036066746421,
            10461748790701146204656405344738842672853909872348714843847599966751514696791
        );                                      
        
        vk.IC[19] = Pairing.G1Point( 
            7897783291354585696514645739406132650539145366369950773873405657194299296265,
            18513503114450730244722250552948255340304097794869619071014597966560344396828
        );                                      
        
        vk.IC[20] = Pairing.G1Point( 
            19537822965518297833316732858119393597375996964161015131358499162882370280761,
            348928897582409573745235740969788537095639209251285640905927337778935799363
        );                                      
        
        vk.IC[21] = Pairing.G1Point( 
            16132454931595059311308826552877638807038417216099017319072582903111951762006,
            18573659329325415189790913212269272885926783298120926808163222901697386138769
        );                                      
        
        vk.IC[22] = Pairing.G1Point( 
            15438944199612132690750181191332061953182406828947980771857682368570457670610,
            6719884719606987038397981409087104977040307998281640926298284957760222953234
        );                                      
        
        vk.IC[23] = Pairing.G1Point( 
            8472288696033461529022712143007272386917524156625774265900365830026090783304,
            8930431830821402336091300224460637533747166975388692155359456596798119992388
        );                                      
        
        vk.IC[24] = Pairing.G1Point( 
            10562998125257060755427654210435021029661350597151880313285836635597118073364,
            13551054729127695084895254757574160986973192322533291892014253271323870187702
        );                                      
        
        vk.IC[25] = Pairing.G1Point( 
            14329624329014216766985418832777944305793429543596882051129234356267434010077,
            9240597138530423368612576453557695785810529054397345424505606701040281587536
        );                                      
        
        vk.IC[26] = Pairing.G1Point( 
            366221935417779112164163967172632864070610460072230657183112323446883378684,
            17277977269899357541817607219050453752576587626764627433273463891749420570679
        );                                      
        
        vk.IC[27] = Pairing.G1Point( 
            21292176369567289282601309738696314949835306997962088193933566253496498246388,
            12099846642471149366195008010591298143464831715466315377136175976160758469757
        );                                      
        
        vk.IC[28] = Pairing.G1Point( 
            9136457800543515518597740900034991401259618069118093286946797704298678384362,
            2117887710843519675976085476194526166947402789509161030202079710361725691237
        );                                      
        
        vk.IC[29] = Pairing.G1Point( 
            21064149295703340004167779868362440463715514201644297137544700611432800358056,
            12332044023926701739117521640862478351556273272241004880481173223893131424917
        );                                      
        
        vk.IC[30] = Pairing.G1Point( 
            7137760411551193087178903366990436187339025934808431842376951235341632674993,
            16906222263470830582986600329126046452637358959083451463588689754223681941971
        );                                      
        
        vk.IC[31] = Pairing.G1Point( 
            4544628717950578095354821520717623818996985365320928478584726328677067723376,
            5379842975448159216665789035888040487032986650762032009179746719252864533591
        );                                      
        
        vk.IC[32] = Pairing.G1Point( 
            9122300098419661110970117276853835917594437451843848977884427000425059849277,
            4553227479317639778666961127152165717087044692070062283285674659662353377166
        );                                      
        
        vk.IC[33] = Pairing.G1Point( 
            19407909837881661278591957727694850614778841105930678997959423311720317003454,
            15182359529522029520161499712250755428994064041290585632566454368894765195967
        );                                      
        
        vk.IC[34] = Pairing.G1Point( 
            8322443299560134833114789147779756984188376203539453553405778107515172948397,
            4354624912688250960183261455900897387559302886298764011509439895362773814736
        );                                      
        
        vk.IC[35] = Pairing.G1Point( 
            17864814045258490426451729844778624486929521573820986239794331305552001430361,
            18488125779913174848699219081650483950832016115567226406297420878467133029245
        );                                      
        
        vk.IC[36] = Pairing.G1Point( 
            9729375026272128254238111723966444319529693528103242669166951496372147882537,
            3393281434982643820675722215867177638290895540194366020790735577295285164211
        );                                      
        
        vk.IC[37] = Pairing.G1Point( 
            18600333542047336604009334629690209474184712140130405342927242814649824698704,
            8115589991491656529462735882751718649047891704695608385125203789008971544335
        );                                      
        
        vk.IC[38] = Pairing.G1Point( 
            725612497444269502081443123139967035828895839870020795728818944278971744991,
            12707037643815195654109894988326240944953839384497958497926419696432217833539
        );                                      
        
        vk.IC[39] = Pairing.G1Point( 
            14363134153617694740360907274772792345078194646637729056080518752362412729232,
            5825694594719615311592223785556699089526118091690094541598626552488634598154
        );                                      
        
        vk.IC[40] = Pairing.G1Point( 
            10407973264494506691675985318046163926570095144772879969766354899299365226261,
            1151429456887044543481162323228754918306462406572088260793114334454423897876
        );                                      
        
        vk.IC[41] = Pairing.G1Point( 
            7108827059096810776989837981163846450665352877279474892558917845697515344729,
            10829065659806926561898762994955208566307609138857261191613591081962085405199
        );                                      
        
        vk.IC[42] = Pairing.G1Point( 
            3532699863008243172301779016724329308736233255015691977604921590052237415611,
            17167499069837479590903180594864817280739689021567059604116713845019985995529
        );                                      
        
        vk.IC[43] = Pairing.G1Point( 
            20451817443388891204454219277053859627488000953209272683406696762405710853836,
            14046770149535216043457205455795647281847624583358790674510756301212772488196
        );                                      
        
        vk.IC[44] = Pairing.G1Point( 
            20558215652199474615490831462422232163134489091768555127552025125311535424295,
            1051504534915848708663198133772716651617022564265235180217988094234519106939
        );                                      
        
        vk.IC[45] = Pairing.G1Point( 
            12914098144567547679302677808780438813555931675316673831675426836635047661761,
            11508669126289664265940615543719511255660002976365298870116867108780238939000
        );                                      
        
        vk.IC[46] = Pairing.G1Point( 
            14445990179136282489693526100586181834611046238621904931324413478122716733924,
            18163125809070467294549075010352962216601324292697317784127742388667812141259
        );                                      
        
        vk.IC[47] = Pairing.G1Point( 
            9331267313464205369896105153720875630027053649432867533104105290864118633724,
            7595595102016162080145841961727495237462089587037831993421796642944860387410
        );                                      
        
        vk.IC[48] = Pairing.G1Point( 
            9790312882741182169586450463269493337076631266246189092532682321131166461951,
            7450089034619290969666524428016070151539459587842709091883303646123532679471
        );                                      
        
        vk.IC[49] = Pairing.G1Point( 
            13156865356091143156572859507630161455538613121481327919826508230084735045047,
            3834406371016673165833669541924794745897096921475296561607101312107969241401
        );                                      
        
        vk.IC[50] = Pairing.G1Point( 
            5800412800765831762589589565847088242730660474623617123642237152948506779174,
            12521891182632850469368931324996587352020821475249693676127040139497786016632
        );                                      
        
        vk.IC[51] = Pairing.G1Point( 
            20411495396601370592548165794484676890586935367215663320878999259706383353913,
            973577798140379881369654133636179045058655752908903552007688952592586380817
        );                                      
        
    }
    function verify(uint[] memory input, Proof memory proof) internal view returns (uint) {
        uint256 snark_scalar_field = 21888242871839275222246405745257275088548364400416034343698204186575808495617;
        VerifyingKey memory vk = verifyingKey();
        require(input.length + 1 == vk.IC.length,"verifier-bad-input");
        // Compute the linear combination vk_x
        Pairing.G1Point memory vk_x = Pairing.G1Point(0, 0);
        for (uint i = 0; i < input.length; i++) {
            require(input[i] < snark_scalar_field,"verifier-gte-snark-scalar-field");
            vk_x = Pairing.addition(vk_x, Pairing.scalar_mul(vk.IC[i + 1], input[i]));
        }
        vk_x = Pairing.addition(vk_x, vk.IC[0]);
        if (!Pairing.pairingProd4(
            Pairing.negate(proof.A), proof.B,
            vk.alfa1, vk.beta2,
            vk_x, vk.gamma2,
            proof.C, vk.delta2
        )) return 1;
        return 0;
    }
    /// @return r  bool true if proof is valid
    function verifyProof(
            uint[2] calldata a,
            uint[2][2] calldata b,
            uint[2] calldata c,
            uint[51] calldata input
        ) public view returns (bool r) {
        Proof memory proof;
        proof.A = Pairing.G1Point(a[0], a[1]);
        proof.B = Pairing.G2Point([b[0][0], b[0][1]], [b[1][0], b[1][1]]);
        proof.C = Pairing.G1Point(c[0], c[1]);
        uint[] memory inputValues = new uint[](input.length);
        for(uint i = 0; i < input.length; i++){
            inputValues[i] = input[i];
        }
        if (verify(inputValues, proof) == 0) {
            return true;
        } else {
            return false;
        }
    }
}
