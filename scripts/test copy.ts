const keccak256 = require('keccak256')
const snarkjs = require("snarkjs");
const random = require("random-bigint")

const multvkey = require("./proof/multiple_verification_key.json")



const a = [
  '14224309888756082833007972341088078205937291346965423298732278697250117852156',
  '20751967030637130197405881264255051307666309928054976217303302057533903844622',]

const b = [
  [
    '2979740224403660212308138540868071380103662441805799831390621314821076623772',
    '2621492580626530804576391751583191643995783227501161119187973979282946327052'
  ],
  [
    '3647324331640412186802407110742670796697680347425985879393431308627528963066',
    '12601942798516611996374653217674419671296169215003230631452571678627149040359'
  ],
]

const c = [
  '21571754167835974238721215574764127887375707448627417181569690023190278354551',
  '12277511703040649062082486395556185801332957444393821543840378415946155534650',
  ]

const pub = [
  '20775607673010627194014556968476266066927294572720319469184847051418138353016',
  '81565300709402423777787681931313842944079077276868280888956630367061968222813'
]

function proofToSnarkjs(a,b,c) {
    return {
        pi_a: [
            a[0], a[1], '1'
        ],
        pi_b: [
            [b[0][0], b[0][1]],
            [b[1][0], b[1][1]],
            ['1', '0']
        ],
        pi_c: [
            c[0], c[1], '1'
        ],
        protocol: 'groth16',
        curve: 'bn128'
    }
}

const proof = {
  pi_a: [
    '14224309888756082833007972341088078205937291346965423298732278697250117852156',
    '20751967030637130197405881264255051307666309928054976217303302057533903844622',
    '1'
  ],
  pi_b: [
    [
      '2979740224403660212308138540868071380103662441805799831390621314821076623772',
      '2621492580626530804576391751583191643995783227501161119187973979282946327052'
    ],
    [
      '3647324331640412186802407110742670796697680347425985879393431308627528963066',
      '12601942798516611996374653217674419671296169215003230631452571678627149040359'
    ],
    [ '1', '0' ]
  ],
  pi_c: [
    '21571754167835974238721215574764127887375707448627417181569690023190278354551',
    '12277511703040649062082486395556185801332957444393821543840378415946155534650',
    '1'
  ],
  protocol: 'groth16',
  curve: 'bn128'
}
const vkey = require("./proof/multiple_verification_key.json")

snarkjs.groth16.verify( vkey, pub, proofToSnarkjs(a,b,c)).then( (res) => {console.log(res)} )